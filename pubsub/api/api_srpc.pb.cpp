//go:build deps_only

// Code generated by protoc-gen-starpc-cpp. DO NOT EDIT.
// protoc-gen-starpc-cpp version: v0.45.1-0.20260203090429-3e915608d4e8
// source: github.com/aperturerobotics/bifrost/pubsub/api/api.proto

#include "api_srpc.pb.hpp"

namespace pubsub::api {

std::pair<std::unique_ptr<SRPCPubSubService_SubscribeClient>, starpc::Error> SRPCPubSubServiceClientImpl::Subscribe() {
  auto [strm, err] = cc_->NewStream(service_id_, "Subscribe", nullptr);
  if (err != starpc::Error::OK) {
    return {nullptr, err};
  }
  return {std::make_unique<SRPCPubSubService_SubscribeClient>(std::move(strm)), starpc::Error::OK};
}

std::vector<std::string> SRPCPubSubServiceHandler::GetMethodIDs() const {
  return {
    "Subscribe",
  };
}

std::pair<bool, starpc::Error> SRPCPubSubServiceHandler::InvokeMethod(
    const std::string& service_id,
    const std::string& method_id,
    starpc::Stream* strm) {
  if (!service_id.empty() && service_id != service_id_) {
    return {false, starpc::Error::OK};
  }

  if (method_id == "Subscribe") {
    SRPCPubSubService_SubscribeStream bidiStrm(strm);
    return {true, impl_->Subscribe(&bidiStrm)};
  }

  return {false, starpc::Error::OK};
}

}  // namespace pubsub::api
