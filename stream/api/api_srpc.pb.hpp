//go:build deps_only && cgo

// Code generated by protoc-gen-starpc-cpp. DO NOT EDIT.
// protoc-gen-starpc-cpp version: v0.46.1
// source: github.com/aperturerobotics/bifrost/stream/api/api.proto

#pragma once

#include <functional>
#include <memory>
#include <string>
#include <utility>

#include "srpc/starpc.hpp"

#include "api.pb.h"

namespace stream::api {

// Service ID for StreamService
constexpr const char* kSRPCStreamServiceServiceID = "stream.api.StreamService";

class SRPCStreamService_ForwardStreamsClient;
class SRPCStreamService_ForwardStreamsStream;
class SRPCStreamService_ListenStreamsClient;
class SRPCStreamService_ListenStreamsStream;
class SRPCStreamService_AcceptStreamClient;
class SRPCStreamService_AcceptStreamStream;
class SRPCStreamService_DialStreamClient;
class SRPCStreamService_DialStreamStream;

// SRPCStreamServiceClient is the client API for StreamService service.
class SRPCStreamServiceClient {
 public:
  virtual ~SRPCStreamServiceClient() = default;

  // SRPCClient returns the underlying SRPC client.
  virtual starpc::Client* SRPCClient() = 0;

  // ForwardStreams
  virtual std::pair<std::unique_ptr<SRPCStreamService_ForwardStreamsClient>, starpc::Error> ForwardStreams(const stream::api::ForwardStreamsRequest& in) = 0;
  // ListenStreams
  virtual std::pair<std::unique_ptr<SRPCStreamService_ListenStreamsClient>, starpc::Error> ListenStreams(const stream::api::ListenStreamsRequest& in) = 0;
  // AcceptStream
  virtual std::pair<std::unique_ptr<SRPCStreamService_AcceptStreamClient>, starpc::Error> AcceptStream() = 0;
  // DialStream
  virtual std::pair<std::unique_ptr<SRPCStreamService_DialStreamClient>, starpc::Error> DialStream() = 0;
};

// SRPCStreamServiceClientImpl implements SRPCStreamServiceClient.
class SRPCStreamServiceClientImpl : public SRPCStreamServiceClient {
 public:
  explicit SRPCStreamServiceClientImpl(starpc::Client* cc, const std::string& service_id = "")
      : cc_(cc), service_id_(service_id.empty() ? kSRPCStreamServiceServiceID : service_id) {}

  starpc::Client* SRPCClient() override { return cc_; }

  // ForwardStreams
  virtual std::pair<std::unique_ptr<SRPCStreamService_ForwardStreamsClient>, starpc::Error> ForwardStreams(const stream::api::ForwardStreamsRequest& in) override;
  // ListenStreams
  virtual std::pair<std::unique_ptr<SRPCStreamService_ListenStreamsClient>, starpc::Error> ListenStreams(const stream::api::ListenStreamsRequest& in) override;
  // AcceptStream
  virtual std::pair<std::unique_ptr<SRPCStreamService_AcceptStreamClient>, starpc::Error> AcceptStream() override;
  // DialStream
  virtual std::pair<std::unique_ptr<SRPCStreamService_DialStreamClient>, starpc::Error> DialStream() override;

 private:
  starpc::Client* cc_;
  std::string service_id_;
};

// NewSRPCStreamServiceClient creates a new client.
inline std::unique_ptr<SRPCStreamServiceClient> NewSRPCStreamServiceClient(starpc::Client* cc) {
  return std::make_unique<SRPCStreamServiceClientImpl>(cc);
}

// SRPCStreamServiceServer is the server API for StreamService service.
class SRPCStreamServiceServer {
 public:
  virtual ~SRPCStreamServiceServer() = default;

  // ForwardStreams
  virtual starpc::Error ForwardStreams(const stream::api::ForwardStreamsRequest& req, SRPCStreamService_ForwardStreamsStream* strm) = 0;
  // ListenStreams
  virtual starpc::Error ListenStreams(const stream::api::ListenStreamsRequest& req, SRPCStreamService_ListenStreamsStream* strm) = 0;
  // AcceptStream
  virtual starpc::Error AcceptStream(SRPCStreamService_AcceptStreamStream* strm) = 0;
  // DialStream
  virtual starpc::Error DialStream(SRPCStreamService_DialStreamStream* strm) = 0;
};

// SRPCStreamServiceHandler implements starpc::Handler for StreamService.
class SRPCStreamServiceHandler : public starpc::Handler {
 public:
  SRPCStreamServiceHandler(SRPCStreamServiceServer* impl, const std::string& service_id = "")
      : impl_(impl), service_id_(service_id.empty() ? kSRPCStreamServiceServiceID : service_id) {}

  const std::string& GetServiceID() const override { return service_id_; }
  std::vector<std::string> GetMethodIDs() const override;
  std::pair<bool, starpc::Error> InvokeMethod(
      const std::string& service_id,
      const std::string& method_id,
      starpc::Stream* strm) override;

 private:
  SRPCStreamServiceServer* impl_;
  std::string service_id_;
};

// NewSRPCStreamServiceHandler creates a new handler for the given implementation.
inline std::unique_ptr<SRPCStreamServiceHandler> NewSRPCStreamServiceHandler(SRPCStreamServiceServer* impl) {
  return std::make_unique<SRPCStreamServiceHandler>(impl);
}

// SRPCRegisterStreamService registers the server implementation with the mux.
// The returned handler must outlive the mux registration.
inline std::pair<std::unique_ptr<SRPCStreamServiceHandler>, starpc::Error> SRPCRegisterStreamService(starpc::Mux* mux, SRPCStreamServiceServer* impl) {
  auto handler = NewSRPCStreamServiceHandler(impl);
  starpc::Error err = mux->Register(handler.get());
  if (err != starpc::Error::OK) {
    return {nullptr, err};
  }
  return {std::move(handler), starpc::Error::OK};
}

// SRPCStreamService_ForwardStreamsClient is the client stream for ForwardStreams.
class SRPCStreamService_ForwardStreamsClient {
 public:
  explicit SRPCStreamService_ForwardStreamsClient(std::unique_ptr<starpc::Stream> strm) : strm_(std::move(strm)) {}

  starpc::Error Recv(stream::api::ForwardStreamsResponse* msg) {
    return strm_->MsgRecv(msg);
  }

  starpc::Error CloseSend() { return strm_->CloseSend(); }
  starpc::Error Close() { return strm_->Close(); }

 private:
  std::unique_ptr<starpc::Stream> strm_;
};

// SRPCStreamService_ForwardStreamsStream is the server stream for ForwardStreams.
class SRPCStreamService_ForwardStreamsStream {
 public:
  explicit SRPCStreamService_ForwardStreamsStream(starpc::Stream* strm) : strm_(strm) {}

  starpc::Error Send(const stream::api::ForwardStreamsResponse& msg) {
    return strm_->MsgSend(msg);
  }

  starpc::Error SendAndClose(const stream::api::ForwardStreamsResponse& msg) {
    starpc::Error err = strm_->MsgSend(msg);
    if (err != starpc::Error::OK) return err;
    return strm_->CloseSend();
  }

 private:
  starpc::Stream* strm_;
};

// SRPCStreamService_ListenStreamsClient is the client stream for ListenStreams.
class SRPCStreamService_ListenStreamsClient {
 public:
  explicit SRPCStreamService_ListenStreamsClient(std::unique_ptr<starpc::Stream> strm) : strm_(std::move(strm)) {}

  starpc::Error Recv(stream::api::ListenStreamsResponse* msg) {
    return strm_->MsgRecv(msg);
  }

  starpc::Error CloseSend() { return strm_->CloseSend(); }
  starpc::Error Close() { return strm_->Close(); }

 private:
  std::unique_ptr<starpc::Stream> strm_;
};

// SRPCStreamService_ListenStreamsStream is the server stream for ListenStreams.
class SRPCStreamService_ListenStreamsStream {
 public:
  explicit SRPCStreamService_ListenStreamsStream(starpc::Stream* strm) : strm_(strm) {}

  starpc::Error Send(const stream::api::ListenStreamsResponse& msg) {
    return strm_->MsgSend(msg);
  }

  starpc::Error SendAndClose(const stream::api::ListenStreamsResponse& msg) {
    starpc::Error err = strm_->MsgSend(msg);
    if (err != starpc::Error::OK) return err;
    return strm_->CloseSend();
  }

 private:
  starpc::Stream* strm_;
};

// SRPCStreamService_AcceptStreamClient is the client stream for AcceptStream.
class SRPCStreamService_AcceptStreamClient {
 public:
  explicit SRPCStreamService_AcceptStreamClient(std::unique_ptr<starpc::Stream> strm) : strm_(std::move(strm)) {}

  starpc::Error Send(const stream::api::AcceptStreamRequest& msg) {
    return strm_->MsgSend(msg);
  }

  starpc::Error Recv(stream::api::AcceptStreamResponse* msg) {
    return strm_->MsgRecv(msg);
  }

  starpc::Error CloseSend() { return strm_->CloseSend(); }
  starpc::Error Close() { return strm_->Close(); }

 private:
  std::unique_ptr<starpc::Stream> strm_;
};

// SRPCStreamService_AcceptStreamStream is the server stream for AcceptStream.
class SRPCStreamService_AcceptStreamStream {
 public:
  explicit SRPCStreamService_AcceptStreamStream(starpc::Stream* strm) : strm_(strm) {}

  starpc::Error Send(const stream::api::AcceptStreamResponse& msg) {
    return strm_->MsgSend(msg);
  }

  starpc::Error SendAndClose(const stream::api::AcceptStreamResponse& msg) {
    starpc::Error err = strm_->MsgSend(msg);
    if (err != starpc::Error::OK) return err;
    return strm_->CloseSend();
  }

  starpc::Error Recv(stream::api::AcceptStreamRequest* msg) {
    return strm_->MsgRecv(msg);
  }

 private:
  starpc::Stream* strm_;
};

// SRPCStreamService_DialStreamClient is the client stream for DialStream.
class SRPCStreamService_DialStreamClient {
 public:
  explicit SRPCStreamService_DialStreamClient(std::unique_ptr<starpc::Stream> strm) : strm_(std::move(strm)) {}

  starpc::Error Send(const stream::api::DialStreamRequest& msg) {
    return strm_->MsgSend(msg);
  }

  starpc::Error Recv(stream::api::DialStreamResponse* msg) {
    return strm_->MsgRecv(msg);
  }

  starpc::Error CloseSend() { return strm_->CloseSend(); }
  starpc::Error Close() { return strm_->Close(); }

 private:
  std::unique_ptr<starpc::Stream> strm_;
};

// SRPCStreamService_DialStreamStream is the server stream for DialStream.
class SRPCStreamService_DialStreamStream {
 public:
  explicit SRPCStreamService_DialStreamStream(starpc::Stream* strm) : strm_(strm) {}

  starpc::Error Send(const stream::api::DialStreamResponse& msg) {
    return strm_->MsgSend(msg);
  }

  starpc::Error SendAndClose(const stream::api::DialStreamResponse& msg) {
    starpc::Error err = strm_->MsgSend(msg);
    if (err != starpc::Error::OK) return err;
    return strm_->CloseSend();
  }

  starpc::Error Recv(stream::api::DialStreamRequest* msg) {
    return strm_->MsgRecv(msg);
  }

 private:
  starpc::Stream* strm_;
};

}  // namespace stream::api
